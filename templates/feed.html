{% extends "layout.html" %}

{% block title %}{{title}}{% endblock %}

{% block head %}
{%- if notes.len() == 1 -%}
{%- for note in notes -%}
<meta name="description" content="A post on {{title}}.">

<meta property="og:url" content="{{note.url(base_url)}}">
<meta property="og:type" content="website">
<meta property="og:title" content="{{title}}">
<meta property="og:description" content="A post on {{title}}.">

<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="{{base_url.host().unwrap()}}">
<meta property="twitter:url" content="{{note.url(base_url)}}">
<meta name="twitter:title" content="{{title}}">
<meta name="twitter:description" content="A post on {{title}}.">

{% for img in note.images(base_url) %}
<meta property="og:image" content="{{img}}">
<meta name="twitter:image" content="{{img}}">
{% endfor %}
{%- endfor -%}
{%- endif -%}

<link href='{{base_url.join("atom.xml").unwrap()}}' rel="alternate" title="Atom" type="application/atom+xml" />
{% endblock %}

{% block nav %}
<ul>
    <li><a href="#">Archive</a>
        <ul>
            {% for d in weeks %}
            <li>
                <a href="/notes/{{d.start}}">
                    {{d.start}} to {{d.end}}
                </a>
            </li>
            {% endfor %}
        </ul>
    </li>
</ul>
{% endblock %}

{% block content %}
{% if notes.is_empty() %}
<section>
    <aside>Nothing here yet.</aside>
</section>
{% endif %}
{% for n in notes %}
<section>
    <aside>
        {{ n.to_html() | safe }}
        <p><small><a href="/note/{{n.note_id}}">{{n.created_at|to_local_tz}}</a></small></p>
    </aside>
</section>
{% endfor %}
{% endblock %}

{% block footer %}
<p>
    <small>Copyright &copy; 2022 {{author}}</small>
</p>
{% endblock %}